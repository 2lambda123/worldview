#!/bin/bash
#
# NASA Worldview
#
# This code was originally developed at NASA/Goddard Space Flight Center for
# the Earth Science Data and Information System (ESDIS) project.
#
# Copyright (C) 2013 - 2014 United States Government as represented by the
# Administrator of the National Aeronautics and Space Administration.
# All Rights Reserved.
#

set -e

BASE_DIR=$(dirname "$0")
BUILD_DIR="$BASE_DIR"/../build/conf
DEBUG_DIR="$BASE_DIR"/../build/worldview-debug/web/conf

rm -rf $BUILD_DIR ; mkdir -p $BUILD_DIR
rm -rf $DEBUG_DIR ; mkdir -p $DEBUG_DIR

cp -r $BASE_DIR/../conf/* $BUILD_DIR

"$BASE_DIR"/gibs2wv "$BUILD_DIR"/gc/*/*.xml \
    > "$BUILD_DIR"/web/wv.main/gc.json
"$BASE_DIR"/conf-cat --input-dir "$BUILD_DIR"/web/wv.main \
    > "$DEBUG_DIR"/wv.json
"$BASE_DIR"/conf-cat --input-dir "$BUILD_DIR"/web/wv.palettes/custom \
    > "$DEBUG_DIR"/wv.palettes.json
cp -r "$BUILD_DIR"/web/wv.palettes/rendered \
    "$DEBUG_DIR"/wv.palettes
"$BASE_DIR"/sld2wv --output-dir "$DEBUG_DIR"/wv.palettes \
    "$BUILD_DIR"/sld/*.xml

cp -r "$DEBUG_DIR" "$BASE_DIR"/../src 


 

