<?xml version="1.0"?>
<project name="jsdoc-ant" basedir="." default="resolve">
	
	<dirname property="jsdoc-ant.basedir" file="${ant.file.jsdoc-ant}"/>
	<property file="${jsdoc-ant.basedir}/build.properties"/>
	
	<target name="resolve" depends="build"/>
	
	<target name="check-package">
		<available file="${jsdoc-ant.jar.path}" property="available"/>
	</target>
	
	<target name="build" depends="check-package" unless="available">
		<delete dir="${jsdoc-ant.repository}"/>
		
		<!-- Don't pull history, just get the latest -->
		<exec executable="git" dir="${lib.artifacts.dir}">
			<arg value="clone"/>
			<arg value="--depth"/> 
			<arg value="1"/>
			<arg value="${jsdoc-ant.url}"/>
		</exec>
		
		<exec executable="ant" dir="${jsdoc-ant.repository}">
			 <arg value="package"/>
		</exec>
			 	
		<copy file="${jsdoc-ant.repository}/build/jar/${jsdoc-ant.jar}" 
		      todir="${lib.packages.dir}"/>
	</target>
	
</project>
