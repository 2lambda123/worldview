<?xml version="1.0"?>
<project name="jsdoc" basedir="." default="resolve">

	<dirname property="jsdoc.basedir" file="${ant.file.jsdoc}"/>
	<property file="${jsdoc.basedir}/build.properties"/>
	
	<target name="resolve" depends="download,unpack"/>
	
	<target name="download">
		<get src="${jsdoc.url}" dest="${lib.artifacts.dir}" 
			 skipexisting="true"/>
	</target>
		
	<target name="check-package">
		<available file="${jsdoc.package.dir}" property="jsdoc.available"/>
	</target>
		
	<target name="unpack" depends="check-package" unless="jsdoc.available">
		<unzip src="${lib.artifacts.dir}/${jsdoc.artifact}" 
			   dest="${lib.packages.dir}"/>
		
		<!-- Ant task assumes different directory locations than what exists
		     in the distribution at the moment. Simply copy the directories
		     to where the task needs them -->
		<copy todir="${jsdoc.home.dir}/../jsdoc-toolkitapp">
			<fileset dir="${jsdoc.home.dir}/app"/>
		</copy>
		<copy todir="${jsdoc.home.dir}/../jsdoc-toolkittemplates">
			<fileset dir="${jsdoc.home.dir}/templates"/>
		</copy>		
	</target>
		
</project>